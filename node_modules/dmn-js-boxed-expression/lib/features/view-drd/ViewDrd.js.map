{"version":3,"file":"ViewDrd.js","names":["ViewDrdComponent","VERY_HIGH_PRIORITY","ViewDrd","constructor","components","eventBus","injector","_injector","onGetComponent","canViewDrd","on","parent","get","definitions","getDefinitions","view","getView","open","$inject"],"sources":["../../../src/features/view-drd/ViewDrd.js"],"sourcesContent":["import ViewDrdComponent from './components/ViewDrdComponent';\r\n\r\nconst VERY_HIGH_PRIORITY = 2000;\r\n\r\n\r\nexport default class ViewDrd {\r\n\r\n  constructor(components, eventBus, injector) {\r\n    this._injector = injector;\r\n\r\n    components.onGetComponent('viewer', VERY_HIGH_PRIORITY, () => {\r\n      if (this.canViewDrd()) {\r\n        return ViewDrdComponent;\r\n      }\r\n    });\r\n\r\n    eventBus.on('showDrd', () => {\r\n      const parent = injector.get('_parent', false);\r\n\r\n      // there is only one single element\r\n      const definitions = parent.getDefinitions();\r\n\r\n      // open definitions\r\n      const view = parent.getView(definitions);\r\n\r\n      parent.open(view);\r\n    });\r\n  }\r\n\r\n  canViewDrd() {\r\n    const parent = this._injector.get('_parent', false);\r\n\r\n    if (!parent) {\r\n      return;\r\n    }\r\n\r\n    // there is only one single element\r\n    const definitions = parent.getDefinitions();\r\n\r\n    return !!parent.getView(definitions);\r\n  }\r\n}\r\n\r\nViewDrd.$inject = [ 'components', 'eventBus', 'injector' ];\r\n"],"mappings":"AAAA,OAAOA,gBAAgB,MAAM,+BAA+B;AAE5D,MAAMC,kBAAkB,GAAG,IAAI;AAG/B,eAAe,MAAMC,OAAO,CAAC;EAE3BC,WAAWA,CAACC,UAAU,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;IAC1C,IAAI,CAACC,SAAS,GAAGD,QAAQ;IAEzBF,UAAU,CAACI,cAAc,CAAC,QAAQ,EAAEP,kBAAkB,EAAE,MAAM;MAC5D,IAAI,IAAI,CAACQ,UAAU,CAAC,CAAC,EAAE;QACrB,OAAOT,gBAAgB;MACzB;IACF,CAAC,CAAC;IAEFK,QAAQ,CAACK,EAAE,CAAC,SAAS,EAAE,MAAM;MAC3B,MAAMC,MAAM,GAAGL,QAAQ,CAACM,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC;;MAE7C;MACA,MAAMC,WAAW,GAAGF,MAAM,CAACG,cAAc,CAAC,CAAC;;MAE3C;MACA,MAAMC,IAAI,GAAGJ,MAAM,CAACK,OAAO,CAACH,WAAW,CAAC;MAExCF,MAAM,CAACM,IAAI,CAACF,IAAI,CAAC;IACnB,CAAC,CAAC;EACJ;EAEAN,UAAUA,CAAA,EAAG;IACX,MAAME,MAAM,GAAG,IAAI,CAACJ,SAAS,CAACK,GAAG,CAAC,SAAS,EAAE,KAAK,CAAC;IAEnD,IAAI,CAACD,MAAM,EAAE;MACX;IACF;;IAEA;IACA,MAAME,WAAW,GAAGF,MAAM,CAACG,cAAc,CAAC,CAAC;IAE3C,OAAO,CAAC,CAACH,MAAM,CAACK,OAAO,CAACH,WAAW,CAAC;EACtC;AACF;AAEAX,OAAO,CAACgB,OAAO,GAAG,CAAE,YAAY,EAAE,UAAU,EAAE,UAAU,CAAE","ignoreList":[]}