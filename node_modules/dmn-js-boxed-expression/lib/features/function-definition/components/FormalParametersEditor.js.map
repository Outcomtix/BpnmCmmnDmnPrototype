{"version":3,"file":"FormalParametersEditor.js","names":["InputSelect","Input","withChangeSupport","FormalParametersEditorProvider","$inject","constructor","components","onGetComponent","context","contextMenuType","FormalParametersEditor","_FormalParametersEditor","props","expression","functionDefinition","injector","get","translate","parameters","getParameters","remove","parameter","removeParameter","add","addParameter","createVNode","null","length","createTextVNode","map","idx","createComponentVNode","Parameter","dataTypes","name","typeRef","onNameChange","updateParameter","onTypeRefChange","typeRefOptions","getAll","t","label","value"],"sources":["../../../../src/features/function-definition/components/FormalParametersEditor.js"],"sourcesContent":["import InputSelect from 'dmn-js-shared/lib/components/InputSelect';\nimport Input from 'dmn-js-shared/lib/components/Input';\n\nimport { withChangeSupport } from '../../../util/withChangeSupport';\n\nexport class FormalParametersEditorProvider {\n  static $inject = [ 'components' ];\n\n  constructor(components) {\n    components.onGetComponent('context-menu', (context = {}) => {\n      if (\n        context.contextMenuType &&\n        context.contextMenuType === 'formal-parameters-editor'\n      ) {\n        return FormalParametersEditor;\n      }\n    });\n  }\n}\n\nconst FormalParametersEditor = withChangeSupport(\n  _FormalParametersEditor,\n  props => [ props.context.expression ]\n);\n\nfunction _FormalParametersEditor({ context: { expression } }, context) {\n  const functionDefinition = context.injector.get('functionDefinition');\n  const translate = context.injector.get('translate');\n\n  const parameters = functionDefinition.getParameters(expression);\n\n  const remove = parameter => {\n    functionDefinition.removeParameter(expression, parameter);\n  };\n\n  const add = () => {\n    functionDefinition.addParameter(expression);\n  };\n\n\n  return (\n    <div className=\"context-menu-container formal-parameters\">\n      <h3>{translate('Edit formal parameters')}</h3>\n      {\n        parameters.length ? (\n          <table>\n            <thead>\n              <tr>\n                <th>Name</th>\n                <th>Type</th>\n              </tr>\n            </thead>\n            <tbody>\n              {\n                parameters.map((parameter, idx) => (\n                  <Parameter\n                    key={ idx }\n                    parameter={ parameter }\n                    remove={ () => remove(parameter) }\n                  />\n                ))\n              }\n            </tbody>\n          </table>\n        ) : null\n      }\n      <button type=\"button\" onClick={ add } className=\"add-parameter\">\n        { translate('Add parameter') }\n      </button>\n    </div>\n  );\n}\n\nconst Parameter = withChangeSupport(function({ parameter, remove }, context) {\n  const dataTypes = context.injector.get('dataTypes');\n  const translate = context.injector.get('translate');\n  const functionDefinition = context.injector.get('functionDefinition');\n\n  const { name, typeRef } = parameter;\n\n  const onNameChange = name => {\n    functionDefinition.updateParameter(parameter, { name });\n  };\n\n  const onTypeRefChange = typeRef => {\n    functionDefinition.updateParameter(parameter, { typeRef });\n  };\n\n  const typeRefOptions = dataTypes.getAll().map(t => {\n    return {\n      label: translate(t),\n      value: t\n    };\n  });\n\n  return (\n    <tr className=\"function-definition-parameter\">\n      <td>\n        <Input onChange={ onNameChange } value={ name } />\n      </td>\n      <td>\n        <InputSelect\n          onChange={ onTypeRefChange }\n          value={ typeRef }\n          options={ typeRefOptions }\n        />\n      </td>\n      <td>\n        <button\n          type=\"button\"\n          className=\"dmn-icon-trash\"\n          onClick={ remove }\n          aria-label={ translate('Remove parameter') }\n        />\n      </td>\n    </tr>\n  );\n}, props => [ props.parameter ]);"],"mappings":"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","ignoreList":[]}