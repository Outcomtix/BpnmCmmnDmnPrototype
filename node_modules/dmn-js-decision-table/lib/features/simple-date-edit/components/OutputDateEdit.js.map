{"version":3,"file":"OutputDateEdit.js","names":["Component","ValidatedInput","getSampleDate","validateISOString","parseString","OutputDateEdit","constructor","props","context","_translate","injector","get","_modeling","element","parsedString","businessObject","text","state","date","debounceInput","debouncedEditCell","editCell","bind","onClick","onInput","cell","setState","value","render","createVNode","null","createComponentVNode","example","string"],"sources":["../../../../src/features/simple-date-edit/components/OutputDateEdit.js"],"sourcesContent":["import { Component } from 'inferno';\r\n\r\nimport ValidatedInput from 'dmn-js-shared/lib/components/ValidatedInput';\r\n\r\nimport {\r\n  getSampleDate,\r\n  validateISOString,\r\n  parseString\r\n} from '../Utils';\r\n\r\n\r\nexport default class OutputDateEdit extends Component {\r\n\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this._translate = context.injector.get('translate');\r\n    this._modeling = context.injector.get('modeling');\r\n\r\n    const { element } = this.props.context;\r\n\r\n    const parsedString = parseString(element.businessObject.text);\r\n\r\n    this.state = {\r\n      date: parsedString ? parsedString.date : ''\r\n    };\r\n\r\n    const debounceInput = context.injector.get('debounceInput');\r\n\r\n    this.debouncedEditCell = debounceInput(this.editCell.bind(this));\r\n    this.editCell = this.editCell.bind(this);\r\n\r\n    this.onClick = this.onClick.bind(this);\r\n    this.onInput = this.onInput.bind(this);\r\n  }\r\n\r\n  editCell(cell, text) {\r\n    this._modeling.editCell(cell, text);\r\n  }\r\n\r\n  onClick() {\r\n    const { element } = this.props.context;\r\n\r\n    const date = getSampleDate();\r\n\r\n    this.setState({\r\n      date\r\n    });\r\n\r\n    this.editCell(element.businessObject, `date(\"${ date }\")`);\r\n  }\r\n\r\n  onInput({ value }) {\r\n    const { element } = this.props.context;\r\n\r\n    this.setState({\r\n      date: value\r\n    });\r\n\r\n    this.debouncedEditCell(element.businessObject, `date(\"${ value }\")`);\r\n  }\r\n\r\n  render() {\r\n    const { date } = this.state;\r\n\r\n    return (\r\n      <div class=\"context-menu-container simple-date-edit\">\r\n\r\n        <h3 class=\"dms-heading\">{ this._translate('Edit date') }</h3>\r\n\r\n        <h4 class=\"dms-heading\">{ this._translate('Set date') }</h4>\r\n\r\n        <div>\r\n          <ValidatedInput\r\n            label={ this._translate('Date value') }\r\n            onInput={ this.onInput }\r\n            placeholder={ this._translate('e.g. { example } ', {\r\n              example: getSampleDate()\r\n            }) }\r\n            validate={ string => validateISOString(string) &&\r\n              this._translate(validateISOString(string)) }\r\n            value={ date }\r\n            className=\"dms-block\">\r\n          </ValidatedInput>\r\n\r\n          <p className=\"dms-hint\">\r\n            <button type=\"button\"\r\n              className=\"use-today\"\r\n              onClick={ this.onClick }>{ this._translate('Use today') }</button>\r\n          </p>\r\n        </div>\r\n\r\n      </div>\r\n    );\r\n  }\r\n}"],"mappings":"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","ignoreList":[]}