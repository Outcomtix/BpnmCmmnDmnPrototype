{"version":3,"file":"EditableHitPolicy.js","names":["Component","find","InputSelect","inject","HIT_POLICIES","EditableHitPolicy","constructor","props","context","_translate","injector","get","onChange","aggregation","hitPolicy","modeling","editHitPolicy","onElementsChanged","forceUpdate","componentDidMount","changeSupport","getRoot","id","componentWillUnmount","offElementsChanged","sheet","render","root","businessObject","hitPolicyEntry","entry","isEqualHitPolicy","value","createVNode","createComponentVNode","map","label","explanation","$inject","a","b"],"sources":["../../../../../src/features/hit-policy/editor/components/EditableHitPolicy.js"],"sourcesContent":["import { Component } from 'inferno';\n\nimport { find } from 'min-dash';\n\nimport InputSelect from 'dmn-js-shared/lib/components/InputSelect';\n\nimport {\n  inject\n} from 'table-js/lib/components';\n\nimport { HIT_POLICIES } from './../../HitPolicies';\n\n\nexport default class EditableHitPolicy extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    this._translate = context.injector.get('translate');\n\n    inject(this);\n  }\n\n  onChange = ({ aggregation, hitPolicy }) => {\n    this.modeling.editHitPolicy(hitPolicy, aggregation);\n  };\n\n  onElementsChanged = () => {\n    this.forceUpdate();\n  };\n\n  componentDidMount() {\n    this.changeSupport.onElementsChanged(this.getRoot().id, this.onElementsChanged);\n  }\n\n  componentWillUnmount() {\n    this.changeSupport.offElementsChanged(this.getRoot().id, this.onElementsChanged);\n  }\n\n  getRoot() {\n    return this.sheet.getRoot();\n  }\n\n  render() {\n    const root = this.getRoot(),\n          businessObject = root.businessObject;\n\n    const { aggregation, hitPolicy } = businessObject;\n\n    const hitPolicyEntry = find(HIT_POLICIES, entry => {\n      return isEqualHitPolicy(entry.value, { aggregation, hitPolicy });\n    });\n\n    return (\n      <div className=\"hit-policy\" title={ this._translate(hitPolicyEntry.explanation) }>\n        <label className=\"dms-label\">\n          { this._translate('Hit policy:') }\n        </label>\n        <InputSelect\n          className=\"hit-policy-edit-policy-select\"\n          label={ this._translate('Hit policy') }\n          onChange={ this.onChange }\n          options={ HIT_POLICIES.map(entry =>\n            ({ ...entry, label: this._translate(entry.label) })) }\n          value={ hitPolicyEntry.value }\n          data-hit-policy=\"true\"\n          noInput\n        />\n      </div>\n    );\n  }\n}\n\nEditableHitPolicy.$inject = [\n  'changeSupport',\n  'sheet',\n  'modeling'\n];\n\n\n// helpers //////////////////////\nfunction isEqualHitPolicy(a, b) {\n  return a.hitPolicy === b.hitPolicy && a.aggregation === b.aggregation;\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,SAAS;AAEnC,SAASC,IAAI,QAAQ,UAAU;AAE/B,OAAOC,WAAW,MAAM,0CAA0C;AAElE,SACEC,MAAM,QACD,yBAAyB;AAEhC,SAASC,YAAY,QAAQ,qBAAqB;AAGlD,eAAe,MAAMC,iBAAiB,SAASL,SAAS,CAAC;EAEvDM,WAAWA,CAACC,KAAK,EAAEC,OAAO,EAAE;IAC1B,KAAK,CAACD,KAAK,EAAEC,OAAO,CAAC;IAErB,IAAI,CAACC,UAAU,GAAGD,OAAO,CAACE,QAAQ,CAACC,GAAG,CAAC,WAAW,CAAC;IAEnDR,MAAM,CAAC,IAAI,CAAC;EACd;EAEAS,QAAQ,GAAGA,CAAC;IAAEC,WAAW;IAAEC;EAAU,CAAC,KAAK;IACzC,IAAI,CAACC,QAAQ,CAACC,aAAa,CAACF,SAAS,EAAED,WAAW,CAAC;EACrD,CAAC;EAEDI,iBAAiB,GAAGA,CAAA,KAAM;IACxB,IAAI,CAACC,WAAW,CAAC,CAAC;EACpB,CAAC;EAEDC,iBAAiBA,CAAA,EAAG;IAClB,IAAI,CAACC,aAAa,CAACH,iBAAiB,CAAC,IAAI,CAACI,OAAO,CAAC,CAAC,CAACC,EAAE,EAAE,IAAI,CAACL,iBAAiB,CAAC;EACjF;EAEAM,oBAAoBA,CAAA,EAAG;IACrB,IAAI,CAACH,aAAa,CAACI,kBAAkB,CAAC,IAAI,CAACH,OAAO,CAAC,CAAC,CAACC,EAAE,EAAE,IAAI,CAACL,iBAAiB,CAAC;EAClF;EAEAI,OAAOA,CAAA,EAAG;IACR,OAAO,IAAI,CAACI,KAAK,CAACJ,OAAO,CAAC,CAAC;EAC7B;EAEAK,MAAMA,CAAA,EAAG;IACP,MAAMC,IAAI,GAAG,IAAI,CAACN,OAAO,CAAC,CAAC;MACrBO,cAAc,GAAGD,IAAI,CAACC,cAAc;IAE1C,MAAM;MAAEf,WAAW;MAAEC;IAAU,CAAC,GAAGc,cAAc;IAEjD,MAAMC,cAAc,GAAG5B,IAAI,CAACG,YAAY,EAAE0B,KAAK,IAAI;MACjD,OAAOC,gBAAgB,CAACD,KAAK,CAACE,KAAK,EAAE;QAAEnB,WAAW;QAAEC;MAAU,CAAC,CAAC;IAClE,CAAC,CAAC;IAEF,OAAAmB,WAAA,WACiB,YAAY,GAAAA,WAAA,aACR,WAAW,EACxB,IAAI,CAACxB,UAAU,CAAC,aAAa,CAAC,MAAAyB,oBAAA,IAAAhC,WAAA;MAAA,aAGtB,+BAA+B;MAAA,SACjC,IAAI,CAACO,UAAU,CAAC,YAAY,CAAC;MAAA,YAC1B,IAAI,CAACG,QAAQ;MAAA,WACdR,YAAY,CAAC+B,GAAG,CAACL,KAAK,KAC7B;QAAE,GAAGA,KAAK;QAAEM,KAAK,EAAE,IAAI,CAAC3B,UAAU,CAACqB,KAAK,CAACM,KAAK;MAAE,CAAC,CAAC,CAAC;MAAA,SAC9CP,cAAc,CAACG,KAAK;MAAA,mBACZ,MAAM;MAAA;IAAA;MAAA,SAXU,IAAI,CAACvB,UAAU,CAACoB,cAAc,CAACQ,WAAW;IAAC;EAgBnF;AACF;AAEAhC,iBAAiB,CAACiC,OAAO,GAAG,CAC1B,eAAe,EACf,OAAO,EACP,UAAU,CACX;;AAGD;AACA,SAASP,gBAAgBA,CAACQ,CAAC,EAAEC,CAAC,EAAE;EAC9B,OAAOD,CAAC,CAACzB,SAAS,KAAK0B,CAAC,CAAC1B,SAAS,IAAIyB,CAAC,CAAC1B,WAAW,KAAK2B,CAAC,CAAC3B,WAAW;AACvE","ignoreList":[]}