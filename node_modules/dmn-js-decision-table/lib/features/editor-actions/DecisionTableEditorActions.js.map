{"version":3,"file":"DecisionTableEditorActions.js","names":["is","DecisionTableEditorActions","constructor","copyCutPaste","editorActions","modeling","selection","cellSelection","sheet","actions","addRule","addRow","type","addRuleAbove","context","rule","hasSelection","get","row","root","getRoot","index","rows","indexOf","addRuleBelow","removeRule","removeRow","addInput","businessObject","input","addCol","length","addInputLeft","col","cols","addInputRight","removeInput","removeCol","addOutput","output","addOutputLeft","addOutputRight","removeOutput","addClause","clause","addClauseLeft","addClauseRight","removeClause","selectCellAbove","selectCell","selectCellBelow","copy","element","cut","pasteBefore","pasteAfter","register","$inject"],"sources":["../../../src/features/editor-actions/DecisionTableEditorActions.js"],"sourcesContent":["import { is } from 'dmn-js-shared/lib/util/ModelUtil';\n\nexport default class DecisionTableEditorActions {\n\n  constructor(copyCutPaste, editorActions, modeling, selection, cellSelection, sheet) {\n    const actions = {\n      addRule() {\n        return modeling.addRow({ type: 'dmn:DecisionRule' });\n      },\n      addRuleAbove(context) {\n        let rule = context && context.rule;\n\n        if (!rule && !selection.hasSelection()) {\n          return;\n        }\n\n        rule = rule || selection.get().row;\n\n        const root = sheet.getRoot(),\n              index = root.rows.indexOf(rule);\n\n        if (index === -1) {\n          return;\n        }\n\n        return modeling.addRow({ type: 'dmn:DecisionRule' }, index);\n      },\n      addRuleBelow(context) {\n        let rule = context && context.rule;\n\n        if (!rule && !selection.hasSelection()) {\n          return;\n        }\n\n        rule = rule || selection.get().row;\n\n        const root = sheet.getRoot(),\n              index = root.rows.indexOf(rule);\n\n        if (index === -1) {\n          return;\n        }\n\n        return modeling.addRow({ type: 'dmn:DecisionRule' }, index + 1);\n      },\n      removeRule(context) {\n        let rule = context && context.rule;\n\n        if (!rule && !selection.hasSelection()) {\n          return;\n        }\n\n        rule = rule || selection.get().row;\n\n        modeling.removeRow(rule);\n      },\n      addInput() {\n        const root = sheet.getRoot(),\n              businessObject = root.businessObject;\n\n        const { input } = businessObject;\n\n        return modeling.addCol({\n          type: 'dmn:InputClause'\n        }, input ? input.length : 0);\n      },\n      addInputLeft(context) {\n        let input = context && context.input;\n\n        if (!input && !selection.hasSelection()) {\n          return;\n        }\n\n        input = input || selection.get().col;\n\n        const root = sheet.getRoot(),\n              index = root.cols.indexOf(input);\n\n        if (index === -1) {\n          return;\n        }\n\n        return modeling.addCol({ type: 'dmn:InputClause' }, index);\n      },\n      addInputRight(context) {\n        let input = context && context.input;\n\n        if (!input && !selection.hasSelection()) {\n          return;\n        }\n\n        input = input || selection.get().col;\n\n        const root = sheet.getRoot(),\n              index = root.cols.indexOf(input);\n\n        if (index === -1) {\n          return;\n        }\n\n        return modeling.addCol({ type: 'dmn:InputClause' }, index + 1);\n      },\n      removeInput(context) {\n        let input = context && context.input;\n\n        if (!input && !selection.hasSelection()) {\n          return;\n        }\n\n        input = input || selection.get().col;\n\n        modeling.removeCol(input);\n      },\n      addOutput() {\n        const root = sheet.getRoot(),\n              businessObject = root.businessObject;\n\n        const input = businessObject.get('input'),\n              output = businessObject.get('output');\n\n        return modeling.addCol(\n          { type: 'dmn:OutputClause' },\n          input.length + output.length\n        );\n      },\n      addOutputLeft(context) {\n        let output = context && context.output;\n\n        if (!output && !selection.hasSelection()) {\n          return;\n        }\n\n        output = output || selection.get().col;\n\n        const root = sheet.getRoot(),\n              index = root.cols.indexOf(output);\n\n        if (index === -1) {\n          return;\n        }\n\n        return modeling.addCol({ type: 'dmn:OutputClause' }, index);\n      },\n      addOutputRight(context) {\n        let output = context && context.output;\n\n        if (!output && !selection.hasSelection()) {\n          return;\n        }\n\n        output = output || selection.get().col;\n\n        const root = sheet.getRoot(),\n              index = root.cols.indexOf(output);\n\n        if (index === -1) {\n          return;\n        }\n\n        return modeling.addCol({ type: 'dmn:OutputClause' }, index + 1);\n      },\n      removeOutput(context) {\n        let output = context && context.output;\n\n        if (!output && !selection.hasSelection()) {\n          return;\n        }\n\n        output = output || selection.get().col;\n\n        modeling.removeCol(output);\n      },\n      addClause() {\n        if (!selection.hasSelection()) {\n          return;\n        }\n\n        const clause = selection.get().col;\n\n        if (is(clause, 'dmn:InputClause')) {\n          return actions.addInput({ input: clause });\n        } else if (is(clause, 'dmn:OutputClause')) {\n          return actions.addOutput({ output: clause });\n        }\n      },\n      addClauseLeft() {\n        if (!selection.hasSelection()) {\n          return;\n        }\n\n        const clause = selection.get().col;\n\n        if (is(clause, 'dmn:InputClause')) {\n          return actions.addInputLeft({ input: clause });\n        } else if (is(clause, 'dmn:OutputClause')) {\n          return actions.addOutputLeft({ output: clause });\n        }\n      },\n      addClauseRight() {\n        if (!selection.hasSelection()) {\n          return;\n        }\n\n        const clause = selection.get().col;\n\n        if (is(clause, 'dmn:InputClause')) {\n          return actions.addInputRight({ input: clause });\n        } else if (is(clause, 'dmn:OutputClause')) {\n          return actions.addOutputRight({ output: clause });\n        }\n      },\n      removeClause() {\n        if (!selection.hasSelection()) {\n          return;\n        }\n\n        const clause = selection.get().col;\n\n        if (is(clause, 'dmn:InputClause')) {\n          return actions.removeInput({ input: clause });\n        } else if (is(clause, 'dmn:OutputClause')) {\n          return actions.removeOutput({ output: clause });\n        }\n      },\n      selectCellAbove() {\n        return cellSelection.selectCell('above');\n      },\n      selectCellBelow() {\n        return cellSelection.selectCell('below');\n      },\n      copy({ element }) {\n        copyCutPaste.copy(element);\n      },\n      cut({ element }) {\n        copyCutPaste.cut(element);\n      },\n      pasteBefore({ element }) {\n        return copyCutPaste.pasteBefore(element);\n      },\n      pasteAfter({ element }) {\n        return copyCutPaste.pasteAfter(element);\n      }\n    };\n\n    editorActions.register(actions);\n  }\n}\n\nDecisionTableEditorActions.$inject = [\n  'copyCutPaste',\n  'editorActions',\n  'modeling',\n  'selection',\n  'cellSelection',\n  'sheet'\n];"],"mappings":"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","ignoreList":[]}