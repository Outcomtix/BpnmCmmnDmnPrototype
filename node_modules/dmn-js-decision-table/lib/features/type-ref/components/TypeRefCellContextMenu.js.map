{"version":3,"file":"TypeRefCellContextMenu.js","names":["Component","is","isInput","isOutput","InputSelect","TypeRefCellContextMenu","constructor","props","context","_translate","injector","get","_modeling","_dataTypes","onTypeChange","value","element","getElement","actualElement","$parent","newProperties","inputExpression","typeRef","updateProperties","input","output","render","typeRefOptions","getAll","map","t","label","createVNode","createTextVNode","createComponentVNode"],"sources":["../../../../src/features/type-ref/components/TypeRefCellContextMenu.js"],"sourcesContent":["import { Component } from 'inferno';\n\nimport { is, isInput, isOutput } from 'dmn-js-shared/lib/util/ModelUtil';\n\nimport InputSelect from 'dmn-js-shared/lib/components/InputSelect';\n\n\nexport default class TypeRefCellContextMenu extends Component {\n\n  constructor(props, context) {\n    super(props);\n\n    this._translate = context.injector.get('translate');\n    this._modeling = context.injector.get('modeling');\n    this._dataTypes = context.injector.get('dataTypes');\n  }\n\n  onTypeChange = (value) => {\n    const element = this.getElement();\n\n    const actualElement = is(element, 'dmn:LiteralExpression')\n      ? element.$parent\n      : element;\n\n    let newProperties;\n\n    if (isInput(actualElement)) {\n      newProperties = {\n        inputExpression: {\n          typeRef: value\n        }\n      };\n    } else if (isOutput(actualElement)) {\n      newProperties = {\n        typeRef: value\n      };\n    }\n\n    this._modeling.updateProperties(actualElement, newProperties);\n  };\n\n  getElement() {\n    return this.props.context.input || this.props.context.output;\n  }\n\n  render() {\n    const element = this.getElement();\n\n    const typeRef = (\n      is(element, 'dmn:InputClause') ?\n        element.inputExpression :\n        element\n    ).typeRef;\n\n    const typeRefOptions = this._dataTypes.getAll().map(t => {\n      return {\n        label: this._translate(t),\n        value: t\n      };\n    });\n\n    const label = this._translate('Type');\n\n    return (\n      <div className=\"type-ref-edit context-menu-container\">\n        <div className=\"dms-form-control\">\n          <label className=\"dms-label\">\n            { label }:\n          </label>\n\n          <InputSelect\n            className=\"type-ref-edit-select\"\n            label={ label }\n            onChange={ this.onTypeChange }\n            options={ typeRefOptions }\n            value={ typeRef } />\n        </div>\n      </div>\n    );\n  }\n}"],"mappings":";AAAA,SAASA,SAAS,QAAQ,SAAS;AAEnC,SAASC,EAAE,EAAEC,OAAO,EAAEC,QAAQ,QAAQ,kCAAkC;AAExE,OAAOC,WAAW,MAAM,0CAA0C;AAGlE,eAAe,MAAMC,sBAAsB,SAASL,SAAS,CAAC;EAE5DM,WAAWA,CAACC,KAAK,EAAEC,OAAO,EAAE;IAC1B,KAAK,CAACD,KAAK,CAAC;IAEZ,IAAI,CAACE,UAAU,GAAGD,OAAO,CAACE,QAAQ,CAACC,GAAG,CAAC,WAAW,CAAC;IACnD,IAAI,CAACC,SAAS,GAAGJ,OAAO,CAACE,QAAQ,CAACC,GAAG,CAAC,UAAU,CAAC;IACjD,IAAI,CAACE,UAAU,GAAGL,OAAO,CAACE,QAAQ,CAACC,GAAG,CAAC,WAAW,CAAC;EACrD;EAEAG,YAAY,GAAIC,KAAK,IAAK;IACxB,MAAMC,OAAO,GAAG,IAAI,CAACC,UAAU,CAAC,CAAC;IAEjC,MAAMC,aAAa,GAAGjB,EAAE,CAACe,OAAO,EAAE,uBAAuB,CAAC,GACtDA,OAAO,CAACG,OAAO,GACfH,OAAO;IAEX,IAAII,aAAa;IAEjB,IAAIlB,OAAO,CAACgB,aAAa,CAAC,EAAE;MAC1BE,aAAa,GAAG;QACdC,eAAe,EAAE;UACfC,OAAO,EAAEP;QACX;MACF,CAAC;IACH,CAAC,MAAM,IAAIZ,QAAQ,CAACe,aAAa,CAAC,EAAE;MAClCE,aAAa,GAAG;QACdE,OAAO,EAAEP;MACX,CAAC;IACH;IAEA,IAAI,CAACH,SAAS,CAACW,gBAAgB,CAACL,aAAa,EAAEE,aAAa,CAAC;EAC/D,CAAC;EAEDH,UAAUA,CAAA,EAAG;IACX,OAAO,IAAI,CAACV,KAAK,CAACC,OAAO,CAACgB,KAAK,IAAI,IAAI,CAACjB,KAAK,CAACC,OAAO,CAACiB,MAAM;EAC9D;EAEAC,MAAMA,CAAA,EAAG;IACP,MAAMV,OAAO,GAAG,IAAI,CAACC,UAAU,CAAC,CAAC;IAEjC,MAAMK,OAAO,GAAG,CACdrB,EAAE,CAACe,OAAO,EAAE,iBAAiB,CAAC,GAC5BA,OAAO,CAACK,eAAe,GACvBL,OAAO,EACTM,OAAO;IAET,MAAMK,cAAc,GAAG,IAAI,CAACd,UAAU,CAACe,MAAM,CAAC,CAAC,CAACC,GAAG,CAACC,CAAC,IAAI;MACvD,OAAO;QACLC,KAAK,EAAE,IAAI,CAACtB,UAAU,CAACqB,CAAC,CAAC;QACzBf,KAAK,EAAEe;MACT,CAAC;IACH,CAAC,CAAC;IAEF,MAAMC,KAAK,GAAG,IAAI,CAACtB,UAAU,CAAC,MAAM,CAAC;IAErC,OAAAuB,WAAA,WACiB,sCAAsC,EAAAA,WAAA,WACpC,kBAAkB,GAAAA,WAAA,aACd,WAAW,GACxBD,KAAK,EAAAE,eAAA,YAAAC,oBAAA,IAAA9B,WAAA;MAAA,aAIG,sBAAsB;MAAA,SACxB2B,KAAK;MAAA,YACF,IAAI,CAACjB,YAAY;MAAA,WAClBa,cAAc;MAAA,SAChBL;IAAO;EAIzB;AACF","ignoreList":[]}