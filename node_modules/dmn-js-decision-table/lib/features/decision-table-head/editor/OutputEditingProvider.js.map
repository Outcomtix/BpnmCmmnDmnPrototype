{"version":3,"file":"OutputEditingProvider.js","names":["closest","domClosest","matches","domMatches","OutputCell","OutputCellContextMenu","OutputEditButton","OutputEditingProvider","constructor","components","contextMenu","eventBus","renderer","onGetComponent","cellType","context","contextMenuType","on","event","output","target","node","left","top","getBoundingClientRect","offset","getOffset","open","x","y","align","$inject","element"],"sources":["../../../../src/features/decision-table-head/editor/OutputEditingProvider.js"],"sourcesContent":["import {\n  closest as domClosest,\n  matches as domMatches\n} from 'min-dom';\n\nimport OutputCell from './components/OutputCell';\nimport OutputCellContextMenu from './components/OutputCellContextMenu';\nimport { OutputEditButton } from './components/OutputEditButton';\n\n\nexport default class OutputEditingProvider {\n\n  constructor(components, contextMenu, eventBus, renderer) {\n\n    components.onGetComponent('cell', ({ cellType }) => {\n      if (cellType === 'output-header') {\n        return OutputCell;\n      }\n    });\n\n    components.onGetComponent('context-menu', (context = {}) => {\n      if (\n        context.contextMenuType === 'output-edit'\n      ) {\n        return OutputCellContextMenu;\n      }\n    });\n\n    components.onGetComponent('cell-inner', (context = {}) => {\n      const { cellType } = context;\n\n      if (\n        cellType === 'output-cell'\n      ) {\n        return OutputEditButton;\n      }\n    });\n\n    eventBus.on('output.edit', ({ event, output }) => {\n      const { target } = event;\n\n      const node = domClosest(target, 'th', true);\n\n      const { left, top } = node.getBoundingClientRect();\n\n      const offset = getOffset(node);\n\n      contextMenu.open({\n        x: left,\n        y: top,\n        align: 'bottom-right'\n      }, {\n        contextMenuType: 'output-edit',\n        output,\n        offset\n      });\n    });\n  }\n\n}\n\nOutputEditingProvider.$inject = [\n  'components',\n  'contextMenu',\n  'eventBus',\n  'renderer'\n];\n\nfunction getOffset(element) {\n  if (!domMatches(element, '.output-cell + .output-cell')) {\n    return { x: -1, y: 0 };\n  }\n}"],"mappings":"AAAA,SACEA,OAAO,IAAIC,UAAU,EACrBC,OAAO,IAAIC,UAAU,QAChB,SAAS;AAEhB,OAAOC,UAAU,MAAM,yBAAyB;AAChD,OAAOC,qBAAqB,MAAM,oCAAoC;AACtE,SAASC,gBAAgB,QAAQ,+BAA+B;AAGhE,eAAe,MAAMC,qBAAqB,CAAC;EAEzCC,WAAWA,CAACC,UAAU,EAAEC,WAAW,EAAEC,QAAQ,EAAEC,QAAQ,EAAE;IAEvDH,UAAU,CAACI,cAAc,CAAC,MAAM,EAAE,CAAC;MAAEC;IAAS,CAAC,KAAK;MAClD,IAAIA,QAAQ,KAAK,eAAe,EAAE;QAChC,OAAOV,UAAU;MACnB;IACF,CAAC,CAAC;IAEFK,UAAU,CAACI,cAAc,CAAC,cAAc,EAAE,CAACE,OAAO,GAAG,CAAC,CAAC,KAAK;MAC1D,IACEA,OAAO,CAACC,eAAe,KAAK,aAAa,EACzC;QACA,OAAOX,qBAAqB;MAC9B;IACF,CAAC,CAAC;IAEFI,UAAU,CAACI,cAAc,CAAC,YAAY,EAAE,CAACE,OAAO,GAAG,CAAC,CAAC,KAAK;MACxD,MAAM;QAAED;MAAS,CAAC,GAAGC,OAAO;MAE5B,IACED,QAAQ,KAAK,aAAa,EAC1B;QACA,OAAOR,gBAAgB;MACzB;IACF,CAAC,CAAC;IAEFK,QAAQ,CAACM,EAAE,CAAC,aAAa,EAAE,CAAC;MAAEC,KAAK;MAAEC;IAAO,CAAC,KAAK;MAChD,MAAM;QAAEC;MAAO,CAAC,GAAGF,KAAK;MAExB,MAAMG,IAAI,GAAGpB,UAAU,CAACmB,MAAM,EAAE,IAAI,EAAE,IAAI,CAAC;MAE3C,MAAM;QAAEE,IAAI;QAAEC;MAAI,CAAC,GAAGF,IAAI,CAACG,qBAAqB,CAAC,CAAC;MAElD,MAAMC,MAAM,GAAGC,SAAS,CAACL,IAAI,CAAC;MAE9BX,WAAW,CAACiB,IAAI,CAAC;QACfC,CAAC,EAAEN,IAAI;QACPO,CAAC,EAAEN,GAAG;QACNO,KAAK,EAAE;MACT,CAAC,EAAE;QACDd,eAAe,EAAE,aAAa;QAC9BG,MAAM;QACNM;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;AAEF;AAEAlB,qBAAqB,CAACwB,OAAO,GAAG,CAC9B,YAAY,EACZ,aAAa,EACb,UAAU,EACV,UAAU,CACX;AAED,SAASL,SAASA,CAACM,OAAO,EAAE;EAC1B,IAAI,CAAC7B,UAAU,CAAC6B,OAAO,EAAE,6BAA6B,CAAC,EAAE;IACvD,OAAO;MAAEJ,CAAC,EAAE,CAAC,CAAC;MAAEC,CAAC,EAAE;IAAE,CAAC;EACxB;AACF","ignoreList":[]}