{"version":3,"file":"InputEditor.js","names":["Component","ContentEditable","LiteralExpression","InputEditor","constructor","props","context","translate","injector","get","expressionLanguages","variableResolver","handleValue","text","change","handleChange","handleLabelChange","value","label","undefined","changes","onChange","getExpressionEditorComponent","getDefault","handleKeyDown","event","key","stopPropagation","_getVariables","getVariables","element","render","ExpressionEditor","variables","createVNode","createComponentVNode","join"],"sources":["../../../../../src/features/decision-table-head/editor/components/InputEditor.js"],"sourcesContent":["import { Component } from 'inferno';\n\nimport ContentEditable from 'dmn-js-shared/lib/components/ContentEditable';\nimport LiteralExpression from 'dmn-js-shared/lib/components/LiteralExpression';\n\nexport default class InputEditor extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.translate = context.injector.get('translate');\n    this.expressionLanguages = context.injector.get('expressionLanguages', false);\n    this.variableResolver = context.injector.get('variableResolver', false);\n\n    this.handleValue = (text) => {\n\n      let change = { text };\n\n      this.handleChange(change);\n    };\n\n    this.handleLabelChange = (value) => {\n\n      // default to <undefined> for empty string\n      var label = value || undefined;\n\n      this.handleChange({ label });\n    };\n  }\n\n  handleChange(changes) {\n    var { onChange } = this.props;\n\n    if (typeof onChange === 'function') {\n      onChange(changes);\n    }\n  }\n\n  getExpressionEditorComponent() {\n    if (this.expressionLanguages &&\n      this.expressionLanguages.getDefault('inputCell').value !== 'feel') {\n      return ContentEditable;\n    }\n\n    return LiteralExpression;\n  }\n\n  /**\n   * Supress default menu closure on enter.\n   * @param {KeyboardEvent} event\n   */\n  handleKeyDown = event => {\n    if (event.key === 'Enter') {\n      event.stopPropagation();\n    }\n  };\n\n  _getVariables() {\n    return this.variableResolver &&\n      this.variableResolver.getVariables(this.props.element);\n  }\n\n  render() {\n\n    const {\n      label,\n      text\n    } = this.props;\n\n    const ExpressionEditor = this.getExpressionEditorComponent();\n\n    const variables = this._getVariables();\n\n    return (\n      <div className=\"context-menu-container ref-input-editor input-edit\"\n        onKeyDown={ this.handleKeyDown }>\n\n        <div className=\"dms-form-control\">\n          <ContentEditable\n            label={ this.translate('Input label') }\n            className=\"dms-input-label\"\n            value={ label || '' }\n            placeholder={ this.translate('Input') }\n            singleLine\n            onInput={ this.handleLabelChange } />\n        </div>\n\n        <div className=\"dms-form-control\">\n          <label className=\"dms-label\">\n            {\n              this.translate('Expression')\n            }\n          </label>\n\n          <ExpressionEditor\n            label={ this.translate('Input expression') }\n            placeholder={ this.translate('Enter expression') }\n            className={\n              [\n                'ref-text',\n                'dms-input'\n              ].join(' ')\n            }\n            onInput={ this.handleValue }\n            value={ text || '' }\n            variables={ variables } />\n        </div>\n      </div>\n    );\n  }\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,SAAS;AAEnC,OAAOC,eAAe,MAAM,8CAA8C;AAC1E,OAAOC,iBAAiB,MAAM,gDAAgD;AAE9E,eAAe,MAAMC,WAAW,SAASH,SAAS,CAAC;EAEjDI,WAAWA,CAACC,KAAK,EAAEC,OAAO,EAAE;IAC1B,KAAK,CAACD,KAAK,EAAEC,OAAO,CAAC;IAErB,IAAI,CAACC,SAAS,GAAGD,OAAO,CAACE,QAAQ,CAACC,GAAG,CAAC,WAAW,CAAC;IAClD,IAAI,CAACC,mBAAmB,GAAGJ,OAAO,CAACE,QAAQ,CAACC,GAAG,CAAC,qBAAqB,EAAE,KAAK,CAAC;IAC7E,IAAI,CAACE,gBAAgB,GAAGL,OAAO,CAACE,QAAQ,CAACC,GAAG,CAAC,kBAAkB,EAAE,KAAK,CAAC;IAEvE,IAAI,CAACG,WAAW,GAAIC,IAAI,IAAK;MAE3B,IAAIC,MAAM,GAAG;QAAED;MAAK,CAAC;MAErB,IAAI,CAACE,YAAY,CAACD,MAAM,CAAC;IAC3B,CAAC;IAED,IAAI,CAACE,iBAAiB,GAAIC,KAAK,IAAK;MAElC;MACA,IAAIC,KAAK,GAAGD,KAAK,IAAIE,SAAS;MAE9B,IAAI,CAACJ,YAAY,CAAC;QAAEG;MAAM,CAAC,CAAC;IAC9B,CAAC;EACH;EAEAH,YAAYA,CAACK,OAAO,EAAE;IACpB,IAAI;MAAEC;IAAS,CAAC,GAAG,IAAI,CAAChB,KAAK;IAE7B,IAAI,OAAOgB,QAAQ,KAAK,UAAU,EAAE;MAClCA,QAAQ,CAACD,OAAO,CAAC;IACnB;EACF;EAEAE,4BAA4BA,CAAA,EAAG;IAC7B,IAAI,IAAI,CAACZ,mBAAmB,IAC1B,IAAI,CAACA,mBAAmB,CAACa,UAAU,CAAC,WAAW,CAAC,CAACN,KAAK,KAAK,MAAM,EAAE;MACnE,OAAOhB,eAAe;IACxB;IAEA,OAAOC,iBAAiB;EAC1B;;EAEA;AACF;AACA;AACA;EACEsB,aAAa,GAAGC,KAAK,IAAI;IACvB,IAAIA,KAAK,CAACC,GAAG,KAAK,OAAO,EAAE;MACzBD,KAAK,CAACE,eAAe,CAAC,CAAC;IACzB;EACF,CAAC;EAEDC,aAAaA,CAAA,EAAG;IACd,OAAO,IAAI,CAACjB,gBAAgB,IAC1B,IAAI,CAACA,gBAAgB,CAACkB,YAAY,CAAC,IAAI,CAACxB,KAAK,CAACyB,OAAO,CAAC;EAC1D;EAEAC,MAAMA,CAAA,EAAG;IAEP,MAAM;MACJb,KAAK;MACLL;IACF,CAAC,GAAG,IAAI,CAACR,KAAK;IAEd,MAAM2B,gBAAgB,GAAG,IAAI,CAACV,4BAA4B,CAAC,CAAC;IAE5D,MAAMW,SAAS,GAAG,IAAI,CAACL,aAAa,CAAC,CAAC;IAEtC,OAAAM,WAAA,WACiB,oDAAoD,GAAAA,WAAA,WAGlD,kBAAkB,EAAAC,oBAAA,IAAAlC,eAAA;MAAA,SAErB,IAAI,CAACM,SAAS,CAAC,aAAa,CAAC;MAAA,aAC3B,iBAAiB;MAAA,SACnBW,KAAK,IAAI,EAAE;MAAA,eACL,IAAI,CAACX,SAAS,CAAC,OAAO,CAAC;MAAA;MAAA,WAE3B,IAAI,CAACS;IAAiB,QAAAkB,WAAA,WAGrB,kBAAkB,GAAAA,WAAA,aACd,WAAW,EAExB,IAAI,CAAC3B,SAAS,CAAC,YAAY,CAAC,MAAA4B,oBAAA,IAAAH,gBAAA;MAAA,SAKtB,IAAI,CAACzB,SAAS,CAAC,kBAAkB,CAAC;MAAA,eAC5B,IAAI,CAACA,SAAS,CAAC,kBAAkB,CAAC;MAAA,aAE9C,CACE,UAAU,EACV,WAAW,CACZ,CAAC6B,IAAI,CAAC,GAAG,CAAC;MAAA,WAEH,IAAI,CAACxB,WAAW;MAAA,SAClBC,IAAI,IAAI,EAAE;MAAA,aACNoB;IAAS;MAAA,aA9Bb,IAAI,CAACT;IAAa;EAkCpC;AACF","ignoreList":[]}