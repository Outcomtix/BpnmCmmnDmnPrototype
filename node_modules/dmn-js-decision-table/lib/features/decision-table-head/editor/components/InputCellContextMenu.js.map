{"version":3,"file":"InputCellContextMenu.js","names":["Component","InputEditor","inject","InputCellContextMenu","constructor","props","context","state","persistChanges","debounceInput","input","unsaved","label","inputExpressionProperties","changes","hasKeys","inputExpression","modeling","updateProperties","setState","handleChange","getValue","attr","target","get","render","createComponentVNode","$inject","obj","Object","keys","length"],"sources":["../../../../../src/features/decision-table-head/editor/components/InputCellContextMenu.js"],"sourcesContent":["import { Component } from 'inferno';\n\nimport InputEditor from './InputEditor';\n\nimport {\n  inject\n} from 'table-js/lib/components';\n\n\nexport default class InputCellContextMenu extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    this.state = {};\n\n    inject(this);\n\n    this.persistChanges = this.debounceInput(this.persistChanges);\n  }\n\n  persistChanges = () => {\n    const { input } = this.props.context;\n\n    const { unsaved } = this.state;\n\n    if (!unsaved) {\n      return;\n    }\n\n    const {\n      label,\n      ...inputExpressionProperties\n    } = unsaved;\n\n    var changes = { };\n\n    if ('label' in unsaved) {\n      changes.label = label;\n    }\n\n    if (hasKeys(inputExpressionProperties)) {\n      changes.inputExpression = inputExpressionProperties;\n    }\n\n    this.modeling.updateProperties(input, changes);\n\n    this.setState({\n      unsaved: false\n    });\n  };\n\n  handleChange = (changes) => {\n    this.setState({\n      unsaved: {\n        ...this.state.unsaved,\n        ...changes\n      }\n    }, this.persistChanges);\n  };\n\n  getValue(attr) {\n    let { input } = this.props.context;\n\n    const { unsaved } = this.state;\n\n    let target = input;\n\n    // input variable stored in parent\n    if (attr === 'text') {\n      target = target.inputExpression;\n    }\n\n    return unsaved && attr in unsaved ? unsaved[attr] : target.get(attr);\n  }\n\n  render() {\n    return (\n      <InputEditor\n        label={ this.getValue('label') }\n        text={ this.getValue('text') }\n        element={ this.props.context.input }\n        onChange={ this.handleChange } />\n    );\n  }\n}\n\nInputCellContextMenu.$inject = [\n  'debounceInput',\n  'modeling',\n  'injector'\n];\n\n\n// helpers //////////////////////\n\nfunction hasKeys(obj) {\n  return Object.keys(obj).length;\n}"],"mappings":";AAAA,SAASA,SAAS,QAAQ,SAAS;AAEnC,OAAOC,WAAW,MAAM,eAAe;AAEvC,SACEC,MAAM,QACD,yBAAyB;AAGhC,eAAe,MAAMC,oBAAoB,SAASH,SAAS,CAAC;EAE1DI,WAAWA,CAACC,KAAK,EAAEC,OAAO,EAAE;IAC1B,KAAK,CAACD,KAAK,EAAEC,OAAO,CAAC;IAErB,IAAI,CAACC,KAAK,GAAG,CAAC,CAAC;IAEfL,MAAM,CAAC,IAAI,CAAC;IAEZ,IAAI,CAACM,cAAc,GAAG,IAAI,CAACC,aAAa,CAAC,IAAI,CAACD,cAAc,CAAC;EAC/D;EAEAA,cAAc,GAAGA,CAAA,KAAM;IACrB,MAAM;MAAEE;IAAM,CAAC,GAAG,IAAI,CAACL,KAAK,CAACC,OAAO;IAEpC,MAAM;MAAEK;IAAQ,CAAC,GAAG,IAAI,CAACJ,KAAK;IAE9B,IAAI,CAACI,OAAO,EAAE;MACZ;IACF;IAEA,MAAM;MACJC,KAAK;MACL,GAAGC;IACL,CAAC,GAAGF,OAAO;IAEX,IAAIG,OAAO,GAAG,CAAE,CAAC;IAEjB,IAAI,OAAO,IAAIH,OAAO,EAAE;MACtBG,OAAO,CAACF,KAAK,GAAGA,KAAK;IACvB;IAEA,IAAIG,OAAO,CAACF,yBAAyB,CAAC,EAAE;MACtCC,OAAO,CAACE,eAAe,GAAGH,yBAAyB;IACrD;IAEA,IAAI,CAACI,QAAQ,CAACC,gBAAgB,CAACR,KAAK,EAAEI,OAAO,CAAC;IAE9C,IAAI,CAACK,QAAQ,CAAC;MACZR,OAAO,EAAE;IACX,CAAC,CAAC;EACJ,CAAC;EAEDS,YAAY,GAAIN,OAAO,IAAK;IAC1B,IAAI,CAACK,QAAQ,CAAC;MACZR,OAAO,EAAE;QACP,GAAG,IAAI,CAACJ,KAAK,CAACI,OAAO;QACrB,GAAGG;MACL;IACF,CAAC,EAAE,IAAI,CAACN,cAAc,CAAC;EACzB,CAAC;EAEDa,QAAQA,CAACC,IAAI,EAAE;IACb,IAAI;MAAEZ;IAAM,CAAC,GAAG,IAAI,CAACL,KAAK,CAACC,OAAO;IAElC,MAAM;MAAEK;IAAQ,CAAC,GAAG,IAAI,CAACJ,KAAK;IAE9B,IAAIgB,MAAM,GAAGb,KAAK;;IAElB;IACA,IAAIY,IAAI,KAAK,MAAM,EAAE;MACnBC,MAAM,GAAGA,MAAM,CAACP,eAAe;IACjC;IAEA,OAAOL,OAAO,IAAIW,IAAI,IAAIX,OAAO,GAAGA,OAAO,CAACW,IAAI,CAAC,GAAGC,MAAM,CAACC,GAAG,CAACF,IAAI,CAAC;EACtE;EAEAG,MAAMA,CAAA,EAAG;IACP,OAAAC,oBAAA,IAAAzB,WAAA;MAAA,SAEY,IAAI,CAACoB,QAAQ,CAAC,OAAO,CAAC;MAAA,QACvB,IAAI,CAACA,QAAQ,CAAC,MAAM,CAAC;MAAA,WAClB,IAAI,CAAChB,KAAK,CAACC,OAAO,CAACI,KAAK;MAAA,YACvB,IAAI,CAACU;IAAY;EAElC;AACF;AAEAjB,oBAAoB,CAACwB,OAAO,GAAG,CAC7B,eAAe,EACf,UAAU,EACV,UAAU,CACX;;AAGD;;AAEA,SAASZ,OAAOA,CAACa,GAAG,EAAE;EACpB,OAAOC,MAAM,CAACC,IAAI,CAACF,GAAG,CAAC,CAACG,MAAM;AAChC","ignoreList":[]}