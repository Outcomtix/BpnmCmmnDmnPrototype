{"version":3,"file":"DecisionTableHead.js","names":["is","getBusinessObject","Component","mixin","ComponentWithSlots","DecisionTableHead","constructor","props","context","_sheet","injector","get","_changeSupport","changeSupport","onElementsChanged","forceUpdate","componentWillMount","root","getRoot","id","componentWillUnmount","offElementsChanged","render","businessObject","inputs","input","outputs","output","createVNode","null","slotFills","type","cellType","map","index","width","slotFill","inputsLength","length","key","DefaultInputHeaderCell","outputsLength","DefaultOutputHeaderCell","className","label","inputExpression","inputValues","translate","actualClassName","text","typeRef","name","outputValues"],"sources":["../../../../src/features/decision-table-head/components/DecisionTableHead.js"],"sourcesContent":["import {\n  is,\n  getBusinessObject\n} from 'dmn-js-shared/lib/util/ModelUtil';\n\nimport { Component } from 'inferno';\n\nimport {\n  mixin\n} from 'table-js/lib/components';\n\nimport {\n  ComponentWithSlots\n} from 'dmn-js-shared/lib/components/mixins';\n\n\nexport default class DecisionTableHead extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    mixin(this, ComponentWithSlots);\n\n    this._sheet = context.injector.get('sheet');\n\n    this._changeSupport = context.changeSupport;\n  }\n\n  onElementsChanged = () => {\n    this.forceUpdate();\n  };\n\n  componentWillMount() {\n    const root = this._sheet.getRoot();\n\n    this._changeSupport.onElementsChanged(root.id, this.onElementsChanged);\n  }\n\n  componentWillUnmount() {\n    const root = this._sheet.getRoot();\n\n    this._changeSupport.offElementsChanged(root.id, this.onElementsChanged);\n  }\n\n  render() {\n    const root = this._sheet.getRoot();\n\n    if (!is(root, 'dmn:DMNElement')) {\n      return null;\n    }\n\n    const businessObject = getBusinessObject(root);\n\n    const inputs = businessObject.input,\n          outputs = businessObject.output;\n\n    return <thead>\n      <tr>\n        <th\n          className=\"index-column\"\n        />\n\n        {\n          this.slotFills({\n            type: 'cell',\n            context: { cellType: 'before-label-cells' }\n          })\n        }\n\n        {\n          inputs && inputs.map((input, index) => {\n            const width = input.width || '192px';\n\n            return this.slotFill({\n              type: 'cell',\n              context: {\n                cellType: 'input-header',\n                input,\n                index,\n                inputsLength: inputs.length,\n                width\n              },\n              key: input.id\n            }, DefaultInputHeaderCell);\n          })\n        }\n        {\n          outputs.map((output, index) => {\n            return this.slotFill({\n              type: 'cell',\n              context: {\n                cellType: 'output-header',\n                output,\n                index,\n                outputsLength: outputs.length\n              },\n              key: output.id\n            }, DefaultOutputHeaderCell);\n          })\n        }\n\n        {\n          this.slotFills({\n            type: 'cell',\n            context: { cellType: 'after-label-cells' }\n          })\n        }\n      </tr>\n    </thead>;\n  }\n}\n\n\n// default components ///////////////////////\n\nfunction DefaultInputHeaderCell(props, context) {\n\n  const {\n    input,\n    className,\n    index\n  } = props;\n\n  const {\n    label,\n    inputExpression,\n    inputValues\n  } = input;\n\n  const translate = context.injector.get('translate');\n\n  const actualClassName = (className || '') + ' input-cell';\n\n  return (\n    <th\n      data-col-id={ input.id }\n      className={ actualClassName }\n      key={ input.id }>\n\n      <div className=\"clause\">\n        { index === 0 ? translate('When') : translate('And') }\n      </div>\n\n      {\n        label ? (\n          <div\n            className=\"input-label\"\n            title={ translate('Input label: ') + label }>\n            { label }\n          </div>\n        ) : (\n          <div\n            className=\"input-expression\"\n            title={ translate('Input expression: ') + inputExpression.text }>\n            { inputExpression.text }\n          </div>\n        )\n      }\n\n      <div\n        className=\"input-variable\"\n        title={\n          inputValues && inputValues.text ? translate('Input values') :\n            translate('Input type')\n        }\n      >\n        { inputValues && inputValues.text || inputExpression.typeRef }\n      </div>\n    </th>\n  );\n}\n\n\nfunction DefaultOutputHeaderCell(props, context) {\n\n  const {\n    output,\n    className,\n    index\n  } = props;\n\n  const {\n    label,\n    name,\n    outputValues,\n    typeRef\n  } = output;\n\n  const translate = context.injector.get('translate');\n\n  const actualClassName = (className || '') + ' output-cell';\n\n  return (\n    <th className={ actualClassName } key={ output.id }>\n\n      <div className=\"clause\">\n        { index === 0 ? translate('Then') : translate('And') }\n      </div>\n\n      {\n        label ? (\n          <div className=\"output-label\" title={ translate('Output label') }>\n            { label }\n          </div>\n        ) : (\n          <div\n            className=\"output-name\"\n            title={ translate('Output name') }>\n            { name }\n          </div>\n        )\n      }\n\n      <div\n        className=\"output-variable\"\n        title={\n          outputValues && outputValues.text ? translate('Output values') :\n            translate('Output type')\n        }\n      >\n        { outputValues && outputValues.text || typeRef }\n      </div>\n    </th>\n  );\n}\n"],"mappings":"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","ignoreList":[]}