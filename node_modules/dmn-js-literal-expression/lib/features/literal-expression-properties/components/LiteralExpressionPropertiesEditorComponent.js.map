{"version":3,"file":"LiteralExpressionPropertiesEditorComponent.js","names":["Component","Input","InputSelect","LiteralExpressionPropertiesComponent","constructor","props","context","_translate","injector","get","_viewer","_modeling","_dataTypes","_eventBus","decision","getDecision","state","name","variable","typeRef","setVariableName","bind","setVariableType","editVariableName","setState","componentWillMount","on","onChange","componentWillUnmount","off","editVariableType","undefined","render","typeRefOptions","getAll","map","t","label","value","createVNode","null","createComponentVNode","ExpressionLanguage","_expressionLanguages","setExpressionLanguage","expressionLanguage","editExpressionLanguage","_getExpressionLanguage","literalExpression","decisionLogic","toLowerCase","_getDefaultExpressionLanguage","getDefault","_shouldRender","expressionLanguages","length","languageOptions"],"sources":["../../../../src/features/literal-expression-properties/components/LiteralExpressionPropertiesEditorComponent.js"],"sourcesContent":["import { Component } from 'inferno';\r\n\r\nimport Input from 'dmn-js-shared/lib/components/Input';\r\nimport InputSelect from 'dmn-js-shared/lib/components/InputSelect';\r\n\r\n\r\nexport default class LiteralExpressionPropertiesComponent extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this._translate = context.injector.get('translate');\r\n    this._viewer = context.injector.get('viewer');\r\n    this._modeling = context.injector.get('modeling');\r\n    this._dataTypes = context.injector.get('dataTypes');\r\n    this._eventBus = context.injector.get('eventBus');\r\n    const decision = this._viewer.getDecision();\r\n\r\n    this.state = {\r\n      name: decision.variable.name,\r\n      typeRef: decision.variable.typeRef\r\n    };\r\n\r\n    this.setVariableName = this.setVariableName.bind(this);\r\n    this.setVariableType = this.setVariableType.bind(this);\r\n  }\r\n\r\n  setVariableName(name) {\r\n    this._modeling.editVariableName(name);\r\n\r\n    this.setState({\r\n      name\r\n    });\r\n  }\r\n\r\n  componentWillMount() {\r\n    this._eventBus.on('elements.changed', this.onChange);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this._eventBus.off('elements.changed', this.onChange);\r\n  }\r\n\r\n  onChange = () => {\r\n    const decision = this._viewer.getDecision();\r\n    if (decision.variable) {\r\n      this.setState({\r\n        name: decision.variable.name\r\n      });\r\n    }\r\n  };\r\n\r\n  setVariableType(typeRef) {\r\n    if (typeRef === '') {\r\n      this._modeling.editVariableType(undefined);\r\n\r\n      this.setState({\r\n        typeRef: undefined\r\n      });\r\n    } else {\r\n      this._modeling.editVariableType(typeRef);\r\n\r\n      this.setState({\r\n        typeRef\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { name, typeRef } = this.state;\r\n\r\n    const typeRefOptions = this._dataTypes.getAll().map(t => {\r\n      return {\r\n        label: this._translate(t),\r\n        value: t\r\n      };\r\n    });\r\n\r\n    return (\r\n      <div className=\"literal-expression-properties\">\r\n        <table className=\"variables-table\">\r\n          <tr>\r\n            <td>{ this._translate('Variable name:') }</td>\r\n            <td>\r\n              <Input\r\n                label={ this._translate('Variable name') }\r\n                className=\"variable-name-input\"\r\n                onInput={ this.setVariableName }\r\n                placeholder={ this._translate('name') }\r\n                value={ name || '' } />\r\n            </td>\r\n          </tr>\r\n          <tr>\r\n            <td>{ this._translate('Variable type:') }</td>\r\n            <td>\r\n              <div className=\"dms-fill-row\">\r\n                <InputSelect\r\n                  label={ this._translate('Variable type') }\r\n                  onChange={ this.setVariableType }\r\n                  options={ typeRefOptions }\r\n                  value={ typeRef }\r\n                  className=\"variable-type-select dms-block\" />\r\n              </div>\r\n            </td>\r\n          </tr>\r\n          <ExpressionLanguage />\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass ExpressionLanguage extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n\r\n    this._translate = context.injector.get('translate');\r\n    this._viewer = context.injector.get('viewer');\r\n    this._modeling = context.injector.get('modeling');\r\n    this._expressionLanguages = context.injector.get('expressionLanguages');\r\n\r\n    this.setExpressionLanguage = this.setExpressionLanguage.bind(this);\r\n  }\r\n\r\n  setExpressionLanguage(expressionLanguage) {\r\n    if (expressionLanguage === '') {\r\n      this._modeling.editExpressionLanguage(undefined);\r\n    } else {\r\n      this._modeling.editExpressionLanguage(expressionLanguage);\r\n    }\r\n  }\r\n\r\n  _getExpressionLanguage() {\r\n    const decision = this._viewer.getDecision();\r\n    const literalExpression = decision.decisionLogic;\r\n\r\n    return (literalExpression && literalExpression.expressionLanguage)\r\n      ? literalExpression.expressionLanguage.toLowerCase()\r\n      : this._getDefaultExpressionLanguage();\r\n  }\r\n\r\n  _getDefaultExpressionLanguage() {\r\n    return this._expressionLanguages.getDefault().value;\r\n  }\r\n\r\n  _shouldRender() {\r\n    const expressionLanguages = this._expressionLanguages.getAll();\r\n\r\n    if (expressionLanguages.length > 1) {\r\n      return true;\r\n    }\r\n\r\n    const expressionLanguage = this._getExpressionLanguage();\r\n\r\n    return expressionLanguage !== this._getDefaultExpressionLanguage();\r\n  }\r\n\r\n  render() {\r\n    if (!this._shouldRender()) {\r\n      return null;\r\n    }\r\n\r\n    const expressionLanguage = this._getExpressionLanguage();\r\n\r\n    const languageOptions = this._expressionLanguages.getAll();\r\n\r\n    return (\r\n      <tr>\r\n        <td>{ this._translate('Expression language:') }</td>\r\n        <td>\r\n          <div className=\"dms-fill-row\">\r\n            <InputSelect\r\n              label={ this._translate('Expression language') }\r\n              onChange={ this.setExpressionLanguage }\r\n              options={ languageOptions }\r\n              value={ expressionLanguage }\r\n              className=\"expression-language-select dms-block\" />\r\n          </div>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n}\r\n"],"mappings":"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","ignoreList":[]}