{"version":3,"file":"List.js","names":["Component","groupBy","RADIO","REMOVE_BTN_CLS","List","constructor","props","context","items","state","componentWillReceiveProps","setState","getRemoveClickHandler","item","e","stopPropagation","removeItem","getToggleClickHandler","toggleItem","onChange","newItems","filter","i","type","map","isChecked","render","className","labelComponent","classes","push","groupedItems","asPairs","toPairs","createVNode","join","pair","groupTitle","groupItems","null","createTextVNode","value","isRemovable","object","entrys","key"],"sources":["../../src/components/List.js"],"sourcesContent":["import { Component } from 'inferno';\n\nimport { groupBy } from 'min-dash';\n\nconst RADIO = 'radio';\n\nconst REMOVE_BTN_CLS =\n  'remove dmn-icon-clear';\n\n/**\n * Shows a list of grouped items that can be checked\n * (checkboxes or radio buttons), removed.\n *\n * Example list of items:\n *\n * [\n *   { value: 'foo', isChecked: true, isRemovable: false, group: 'foo' },\n *   { value: 'bar', isChecked: false, isRemovable: true, group: 'bar' },\n *   { value: 'baz', isCheckable: false, group: 'baz' }\n * ]\n */\nexport default class List extends Component {\n\n  constructor(props, context) {\n    super(props, context);\n\n    const { items } = props;\n\n    this.state = {\n      items\n    };\n  }\n\n  componentWillReceiveProps(props) {\n    const { items } = props;\n\n    this.setState({\n      items\n    });\n  }\n\n  getRemoveClickHandler = (item) => {\n    return (e) => {\n      e.stopPropagation();\n\n      this.removeItem(item);\n    };\n  };\n\n  getToggleClickHandler = (item) => {\n    return (e) => {\n      e.stopPropagation();\n\n      this.toggleItem(item);\n    };\n  };\n\n  removeItem = (item) => {\n    const { onChange } = this.props;\n\n    // remove item\n    const newItems = this.state.items.filter(i => i !== item);\n\n    this.setState({\n      items: newItems\n    });\n\n    onChange && onChange(newItems);\n  };\n\n  toggleItem = (item) => {\n    const { onChange, type } = this.props;\n\n    // toggle item\n    const newItems = this.state.items.map(i => {\n      if (i === item) {\n        i.isChecked = !i.isChecked;\n      } else {\n\n        if (type === RADIO) {\n          i.isChecked = false;\n        }\n\n      }\n\n      return i;\n    });\n\n    this.setState({\n      items: newItems\n    });\n\n    onChange && onChange(newItems);\n  };\n\n  render() {\n    const { className, items, type, labelComponent } = this.props;\n\n    const classes = [\n      'dms-list-component'\n    ];\n\n    if (className) {\n      classes.push(className);\n    }\n\n    // group items by group title\n    const groupedItems = groupBy(items, 'group');\n\n    const asPairs = toPairs(groupedItems);\n\n    return (\n      <div className={ classes.join(' ') }>\n        {\n          asPairs.map(pair => {\n\n            const groupTitle = pair[0],\n                  groupItems = pair[1];\n\n            return (\n              <div className=\"group\">\n\n                { labelComponent && labelComponent(groupTitle) ||\n                  <h4 className=\"dms-heading\">{ groupTitle }</h4> }\n\n                <ul className=\"items no-wrap\">\n                  {\n                    groupItems.map(item => {\n\n                      return (\n                        <li className=\"item\">\n                          {\n                            type\n                              && <input\n                                type={ type }\n                                checked={ item.isChecked }\n                                className=\"item-toggle\"\n                                onClick={ this.getToggleClickHandler(item) } />\n                          }\n                          &nbsp;\n                          { item.value }\n                          {\n                            item.isRemovable\n                              && (<span\n                                title=\"Remove item\"\n                                onClick={ this.getRemoveClickHandler(item) }\n                                className={ REMOVE_BTN_CLS }>\n                              </span>)\n                          }\n                        </li>\n                      );\n\n                    })\n                  }\n                </ul>\n\n              </div>\n            );\n\n          })\n        }\n\n      </div>\n    );\n  }\n}\n\n\n// helpers ////////////\n\nfunction toPairs(object) {\n  const entrys = [];\n\n  for (let key in object) {\n    entrys.push([ key, object[key] ]);\n  }\n\n  return entrys;\n}"],"mappings":"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","ignoreList":[]}