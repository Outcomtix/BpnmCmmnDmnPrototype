{"version":3,"file":"ModelUtil.js","names":["some","is","element","type","bo","getBusinessObject","$instanceOf","isInput","isOutput","isRule","businessObject","getName","name","isAny","types","t","getBoxedExpression","decisionOrBkm","get","encapsulatedLogic","FEEL_NAMESPACE","isFeel","current","$parent","expressionLanguage","test","kind"],"sources":["../../src/util/ModelUtil.js"],"sourcesContent":["import { some } from 'min-dash';\n\n/**\n * Is an element of the given DMN type?\n *\n * @param  {tjs.model.Base|ModdleElement} element\n * @param  {string} type\n *\n * @return {boolean}\n */\nexport function is(element, type) {\n  var bo = getBusinessObject(element);\n\n  return bo && (typeof bo.$instanceOf === 'function') && bo.$instanceOf(type);\n}\n\n\nexport function isInput(element) {\n  return is(element, 'dmn:InputClause');\n}\n\n\nexport function isOutput(element) {\n  return is(element, 'dmn:OutputClause');\n}\n\n\nexport function isRule(element) {\n  return is(element, 'dmn:DecisionRule');\n}\n\n\n/**\n * Return the business object for a given element.\n *\n * @param  {tjs.model.Base|ModdleElement} element\n *\n * @return {ModdleElement}\n */\nexport function getBusinessObject(element) {\n  return (element && element.businessObject) || element;\n}\n\n\nexport function getName(element) {\n  return getBusinessObject(element).name;\n}\n\n\n/**\n * Return true if element has any of the given types.\n *\n * @param {djs.model.Base} element\n * @param {Array<string>} types\n *\n * @return {boolean}\n */\nexport function isAny(element, types) {\n  return some(types, function(t) {\n    return is(element, t);\n  });\n}\n\n/**\n * Return main boxed expression of a given decision or BKM.\n *\n * @param {ModdleElement} decisionOrBkm - the decision or business knowledge model\n * @returns {ModdleElement|undefined}\n */\nexport function getBoxedExpression(decisionOrBkm) {\n  var bo = getBusinessObject(decisionOrBkm);\n\n  if (is(bo, 'dmn:Decision')) {\n    return bo.get('decisionLogic');\n  } else if (is(bo, 'dmn:BusinessKnowledgeModel')) {\n    var encapsulatedLogic = bo.get('encapsulatedLogic');\n\n    return encapsulatedLogic && encapsulatedLogic.get('body');\n  }\n}\n\nconst FEEL_NAMESPACE = 'https://www.omg.org/spec/DMN/20191111/FEEL/';\n\n/**\n * Return `true` if the expression language for a given element is FEEL.\n *\n * @param {ModdleElement} element\n * @returns {string}\n */\nexport function isFeel(element) {\n  for (let current = element; current; current = current.$parent) {\n    const expressionLanguage = current.get('expressionLanguage');\n\n    if (expressionLanguage) {\n      if (expressionLanguage === FEEL_NAMESPACE || /feel/i.test(expressionLanguage)) {\n        return true;\n      } else {\n        return false;\n      }\n    }\n\n    if (is(current, 'dmn:FunctionDefinition')) {\n\n      // TODO(@barmac): remove fallback when moddle assures the default value\n      const kind = current.get('kind') || 'FEEL';\n\n      return kind === 'FEEL';\n    }\n  }\n\n  return true;\n}\n"],"mappings":"AAAA,SAASA,IAAI,QAAQ,UAAU;;AAE/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,EAAEA,CAACC,OAAO,EAAEC,IAAI,EAAE;EAChC,IAAIC,EAAE,GAAGC,iBAAiB,CAACH,OAAO,CAAC;EAEnC,OAAOE,EAAE,IAAK,OAAOA,EAAE,CAACE,WAAW,KAAK,UAAW,IAAIF,EAAE,CAACE,WAAW,CAACH,IAAI,CAAC;AAC7E;AAGA,OAAO,SAASI,OAAOA,CAACL,OAAO,EAAE;EAC/B,OAAOD,EAAE,CAACC,OAAO,EAAE,iBAAiB,CAAC;AACvC;AAGA,OAAO,SAASM,QAAQA,CAACN,OAAO,EAAE;EAChC,OAAOD,EAAE,CAACC,OAAO,EAAE,kBAAkB,CAAC;AACxC;AAGA,OAAO,SAASO,MAAMA,CAACP,OAAO,EAAE;EAC9B,OAAOD,EAAE,CAACC,OAAO,EAAE,kBAAkB,CAAC;AACxC;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASG,iBAAiBA,CAACH,OAAO,EAAE;EACzC,OAAQA,OAAO,IAAIA,OAAO,CAACQ,cAAc,IAAKR,OAAO;AACvD;AAGA,OAAO,SAASS,OAAOA,CAACT,OAAO,EAAE;EAC/B,OAAOG,iBAAiB,CAACH,OAAO,CAAC,CAACU,IAAI;AACxC;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,KAAKA,CAACX,OAAO,EAAEY,KAAK,EAAE;EACpC,OAAOd,IAAI,CAACc,KAAK,EAAE,UAASC,CAAC,EAAE;IAC7B,OAAOd,EAAE,CAACC,OAAO,EAAEa,CAAC,CAAC;EACvB,CAAC,CAAC;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,kBAAkBA,CAACC,aAAa,EAAE;EAChD,IAAIb,EAAE,GAAGC,iBAAiB,CAACY,aAAa,CAAC;EAEzC,IAAIhB,EAAE,CAACG,EAAE,EAAE,cAAc,CAAC,EAAE;IAC1B,OAAOA,EAAE,CAACc,GAAG,CAAC,eAAe,CAAC;EAChC,CAAC,MAAM,IAAIjB,EAAE,CAACG,EAAE,EAAE,4BAA4B,CAAC,EAAE;IAC/C,IAAIe,iBAAiB,GAAGf,EAAE,CAACc,GAAG,CAAC,mBAAmB,CAAC;IAEnD,OAAOC,iBAAiB,IAAIA,iBAAiB,CAACD,GAAG,CAAC,MAAM,CAAC;EAC3D;AACF;AAEA,MAAME,cAAc,GAAG,6CAA6C;;AAEpE;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,MAAMA,CAACnB,OAAO,EAAE;EAC9B,KAAK,IAAIoB,OAAO,GAAGpB,OAAO,EAAEoB,OAAO,EAAEA,OAAO,GAAGA,OAAO,CAACC,OAAO,EAAE;IAC9D,MAAMC,kBAAkB,GAAGF,OAAO,CAACJ,GAAG,CAAC,oBAAoB,CAAC;IAE5D,IAAIM,kBAAkB,EAAE;MACtB,IAAIA,kBAAkB,KAAKJ,cAAc,IAAI,OAAO,CAACK,IAAI,CAACD,kBAAkB,CAAC,EAAE;QAC7E,OAAO,IAAI;MACb,CAAC,MAAM;QACL,OAAO,KAAK;MACd;IACF;IAEA,IAAIvB,EAAE,CAACqB,OAAO,EAAE,wBAAwB,CAAC,EAAE;MAEzC;MACA,MAAMI,IAAI,GAAGJ,OAAO,CAACJ,GAAG,CAAC,MAAM,CAAC,IAAI,MAAM;MAE1C,OAAOQ,IAAI,KAAK,MAAM;IACxB;EACF;EAEA,OAAO,IAAI;AACb","ignoreList":[]}